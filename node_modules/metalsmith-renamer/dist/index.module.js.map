{"version":3,"file":"index.module.js","sources":["../src/index.js"],"sourcesContent":["\"use strict\";\nimport { Minimatch } from \"minimatch\";\nimport { dirname, basename } from \"path\";\nimport { join } from \"path\";\n\nconst renamer = (options) => {\n  return (files, _, done) => {\n    Object.keys(options).map((opt) => {\n      const matcher = Minimatch(options[opt].pattern);\n\n      Object.keys(files).map((file) => {\n        if (!matcher.match(file)) {\n          return;\n        }\n\n        const nameTransformer = options[opt].rename;\n        let newFilename = dirname(file);\n\n        // If file is at root of the `source` directory, strip the relative file path\n        if (newFilename === \".\") {\n          newFilename = \"\";\n        }\n\n        if (typeof nameTransformer === \"function\") {\n          newFilename = join(newFilename, nameTransformer(basename(file)));\n        } else {\n          newFilename = join(newFilename, nameTransformer);\n        }\n\n        if (newFilename !== file) {\n          files[newFilename] = files[file];\n          delete files[file];\n        }\n      });\n    });\n\n    done();\n  };\n};\n\nexport default renamer;\n"],"names":["renamer","options","files","_","done","Object","keys","map","opt","matcher","Minimatch","pattern","file","match","nameTransformer","rename","newFilename","dirname","join","basename"],"mappings":";;;MAKMA,OAAO,GAAIC,OAAD,IAAa;AAC3B,SAAO,CAACC,KAAD,EAAQC,CAAR,EAAWC,IAAX,KAAoB;AACzBC,IAAAA,MAAM,CAACC,IAAP,CAAYL,OAAZ,EAAqBM,GAArB,CAA0BC,GAAD,IAAS;AAChC,YAAMC,OAAO,GAAGC,SAAS,CAACT,OAAO,CAACO,GAAD,CAAP,CAAaG,OAAd,CAAzB;AAEAN,MAAAA,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmBK,GAAnB,CAAwBK,IAAD,IAAU;AAC/B,YAAI,CAACH,OAAO,CAACI,KAAR,CAAcD,IAAd,CAAL,EAA0B;AACxB;AACD;;AAED,cAAME,eAAe,GAAGb,OAAO,CAACO,GAAD,CAAP,CAAaO,MAArC;AACA,YAAIC,WAAW,GAAGC,OAAO,CAACL,IAAD,CAAzB,CAN+B;;AAS/B,YAAII,WAAW,KAAK,GAApB,EAAyB;AACvBA,UAAAA,WAAW,GAAG,EAAd;AACD;;AAED,YAAI,OAAOF,eAAP,KAA2B,UAA/B,EAA2C;AACzCE,UAAAA,WAAW,GAAGE,IAAI,CAACF,WAAD,EAAcF,eAAe,CAACK,QAAQ,CAACP,IAAD,CAAT,CAA7B,CAAlB;AACD,SAFD,MAEO;AACLI,UAAAA,WAAW,GAAGE,IAAI,CAACF,WAAD,EAAcF,eAAd,CAAlB;AACD;;AAED,YAAIE,WAAW,KAAKJ,IAApB,EAA0B;AACxBV,UAAAA,KAAK,CAACc,WAAD,CAAL,GAAqBd,KAAK,CAACU,IAAD,CAA1B;AACA,iBAAOV,KAAK,CAACU,IAAD,CAAZ;AACD;AACF,OAvBD;AAwBD,KA3BD;AA6BAR,IAAAA,IAAI;AACL,GA/BD;AAgCD;;;;"}